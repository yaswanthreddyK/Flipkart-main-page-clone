const catData = [
  {
    id: 0,
    category: "Fashion",
    childs: {
      "Men's Top Wear1": [
        "All",
        "Men's T-Shirts",
        "Men's Casual Shirst",
        "Men's Formal Shirts",
        "Men's Kurtas",
        "Men's Ethnic Sets",
        "Men's Blazers",
      ],
      "Men's Bottom Wear": [
        "All",
        "Men's Jeans",
        "Men's Trousers",
        "Men's Trackpants",
        "Men's Shorts",
        "Men's Cargos",
        "Men's Threefourths",
        "Men's Pyjamas & Loungepants",
      ],
      "Women Ethnic": [
        "All",
        "Women Sarees",
        "Women Kurtas & Kurtis",
        "Women Kurta Sets & Salwar Suits",
        "Ethnic Dresses",
        "Women Dress Material",
        "Women Gowns",
        "Women Lehenga Cholis",
        "Women Leggings & Patialas",
        "Women Blouse",
      ],
      "Women Westren": [
        "All",
        "Women Tops",
        "Women Dresses",
        "Women T-shirst & Polo T-shirts",
        "Women Jeans",
        "Women Nighties & Night Dresses",
        "Women Nightsuit",
        "Women Track Pants",
        "Women Trouser",
        "Women Jumpsuit",
      ],
    },
  },
  {
    id: 1,
    category: "Electronics",
    childs: {
      "Men's Top Wear2": [
        "All",
        "Men's T-Shirts",
        "Men's Casual Shirst",
        "Men's Formal Shirts",
        "Men's Kurtas",
        "Men's Ethnic Sets",
        "Men's Blazers",
      ],
      "Men's Bottom Wear": [
        "All",
        "Men's Jeans",
        "Men's Trousers",
        "Men's Trackpants",
        "Men's Shorts",
        "Men's Cargos",
        "Men's Threefourths",
        "Men's Pyjamas & Loungepants",
      ],
      "Women Ethnic": [
        "All",
        "Women Sarees",
        "Women Kurtas & Kurtis",
        "Women Kurta Sets & Salwar Suits",
        "Ethnic Dresses",
        "Women Dress Material",
        "Women Gowns",
        "Women Lehenga Cholis",
        "Women Leggings & Patialas",
        "Women Blouse",
      ],
      "Women Westren": [
        "All",
        "Women Tops",
        "Women Dresses",
        "Women T-shirst & Polo T-shirts",
        "Women Jeans",
        "Women Nighties & Night Dresses",
        "Women Nightsuit",
        "Women Track Pants",
        "Women Trouser",
        "Women Jumpsuit",
      ],
    },
  },
  {
    id: 2,
    category: "Home & Furniture",
    childs: {
      "Men's Top Wear3": [
        "All",
        "Men's T-Shirts",
        "Men's Casual Shirst",
        "Men's Formal Shirts",
        "Men's Kurtas",
        "Men's Ethnic Sets",
        "Men's Blazers",
      ],
      "Men's Bottom Wear": [
        "All",
        "Men's Jeans",
        "Men's Trousers",
        "Men's Trackpants",
        "Men's Shorts",
        "Men's Cargos",
        "Men's Threefourths",
        "Men's Pyjamas & Loungepants",
      ],
      "Women Ethnic": [
        "All",
        "Women Sarees",
        "Women Kurtas & Kurtis",
        "Women Kurta Sets & Salwar Suits",
        "Ethnic Dresses",
        "Women Dress Material",
        "Women Gowns",
        "Women Lehenga Cholis",
        "Women Leggings & Patialas",
        "Women Blouse",
      ],
      "Women Westren": [
        "All",
        "Women Tops",
        "Women Dresses",
        "Women T-shirst & Polo T-shirts",
        "Women Jeans",
        "Women Nighties & Night Dresses",
        "Women Nightsuit",
        "Women Track Pants",
        "Women Trouser",
        "Women Jumpsuit",
      ],
    },
  },
  {
    id: 3,
    category: "Beauty, Toys & More",
    childs: {
      "Men's Top Wear4": [
        "All",
        "Men's T-Shirts",
        "Men's Casual Shirst",
        "Men's Formal Shirts",
        "Men's Kurtas",
        "Men's Ethnic Sets",
        "Men's Blazers",
      ],
      "Men's Bottom Wear": [
        "All",
        "Men's Jeans",
        "Men's Trousers",
        "Men's Trackpants",
        "Men's Shorts",
        "Men's Cargos",
        "Men's Threefourths",
        "Men's Pyjamas & Loungepants",
      ],
      "Women Ethnic": [
        "All",
        "Women Sarees",
        "Women Kurtas & Kurtis",
        "Women Kurta Sets & Salwar Suits",
        "Ethnic Dresses",
        "Women Dress Material",
        "Women Gowns",
        "Women Lehenga Cholis",
        "Women Leggings & Patialas",
        "Women Blouse",
      ],
      "Women Westren": [
        "All",
        "Women Tops",
        "Women Dresses",
        "Women T-shirst & Polo T-shirts",
        "Women Jeans",
        "Women Nighties & Night Dresses",
        "Women Nightsuit",
        "Women Track Pants",
        "Women Trouser",
        "Women Jumpsuit",
      ],
    },
  },
  {
    id: 4,
    category: "Two Wheelers",
    childs: {
      "Men's Top Wear5": [
        "All",
        "Men's T-Shirts",
        "Men's Casual Shirst",
        "Men's Formal Shirts",
        "Men's Kurtas",
        "Men's Ethnic Sets",
        "Men's Blazers",
      ],
      "Men's Bottom Wear": [
        "All",
        "Men's Jeans",
        "Men's Trousers",
        "Men's Trackpants",
        "Men's Shorts",
        "Men's Cargos",
        "Men's Threefourths",
        "Men's Pyjamas & Loungepants",
      ],
      "Women Ethnic": [
        "All",
        "Women Sarees",
        "Women Kurtas & Kurtis",
        "Women Kurta Sets & Salwar Suits",
        "Ethnic Dresses",
        "Women Dress Material",
        "Women Gowns",
        "Women Lehenga Cholis",
        "Women Leggings & Patialas",
        "Women Blouse",
      ],
      "Women Westren": [
        "All",
        "Women Tops",
        "Women Dresses",
        "Women T-shirst & Polo T-shirts",
        "Women Jeans",
        "Women Nighties & Night Dresses",
        "Women Nightsuit",
        "Women Track Pants",
        "Women Trouser",
        "Women Jumpsuit",
      ],
    },
  },
];


const items = document.querySelectorAll(".cat-item");
const arrowItems = [];  
items.forEach((item) => {
  const arrow = item.querySelector(".arrow-head");
  if (arrow) {
    item.addEventListener("mouseenter",()=>{
      item.querySelector('.island').style.display = "flex";
      dispatchEnterEvent(item);
      arrow.classList.add("rotation");
    })
    item.addEventListener("mouseleave",()=>{
      item.querySelector('.island').style.display = "none";
      dispatchExitEvent(item);
      arrow.classList.remove("rotation");
    })
    arrowItems.push(item);
  }
});

arrowItems.forEach((item, index) => {
  const island = document.createElement("div");
  island.classList.add("island");
  const leftIsland = document.createElement("div");
  leftIsland.classList.add("left-island");
  const divisions = catData[index].childs;
  for (let div of Object.keys(divisions)) {
    leftIsland.innerHTML += `<div class="division">
      <a href="#" class="div-title">${div}</a>
      <svg class="div-arrow-head" width="4.7" height="8" viewBox="0 0 16 27" xmlns="http://www.w3.org/2000/svg"><path d="M16 23.207L6.11 13.161 16 3.093 12.955 0 0 13.161l12.955 13.161z" class="_2gTTdy"></path></svg>
      </div>`;
  }
  island.appendChild(leftIsland);
  item.appendChild(island);
   createEventListener(item,index);
 
});

function dispatchEnterEvent(item){
  const div = item.querySelectorAll('.division')[0];
  const eve = new Event('mouseenter');
  div.dispatchEvent(eve); 
}

function dispatchExitEvent(item){
  const div = item.querySelectorAll('.division')[0];
  const rightIsland = div.lastElementChild;
  div.removeChild(rightIsland);
}
function createEventListener(item,index){
  const divisions = item.querySelectorAll(".division");
  divisions.forEach(div => {
    div.addEventListener("mouseenter",()=>{
       createRightIsland(div,index);
         div.querySelector('.div-arrow-head').style.visibility = "visible";
    });
    div.addEventListener("mouseleave",()=>{
         const rightIsland = div.querySelector('.right-island');
         div.querySelector(".right-island").remove(rightIsland);
         div.querySelector('.div-arrow-head').style.visibility = "hidden";
    });
  })
}

function createRightIsland(division,index){
  const rightIsland = document.createElement("div");
  rightIsland.classList.add("right-island");
  const title = division.querySelector('.div-title');
  const subDivs = catData[index].childs[title.textContent.trim()];
   
  subDivs.forEach(subdiv => {
    rightIsland.innerHTML += `<a href="#" class="sub-div">${subdiv}</a>`
  })
  
  division.appendChild(rightIsland);
}



